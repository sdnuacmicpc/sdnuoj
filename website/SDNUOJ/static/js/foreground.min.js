/*!
 * SDNU Online Judge
 * https://github.com/sdnuacmicpc/sdnuoj
 *
 * Copyright 2012-2015 SDNU ACM-ICPC TEAM
 * Licensed under the MIT license
 */
var SDNUOJ=SDNUOJ||{};SDNUOJ.namespace=function(d){var c=d.split("."),b=SDNUOJ;if(c[0]==="SDNUOJ"){c=c.slice(1)}for(var a=0;a<c.length;a+=1){if(typeof b[c[a]]==="undefined"){b[c[a]]={}}b=b[c[a]]}return b};SDNUOJ.PM={SOURCEVIEW:2,ADMINISTRATOR:128,NEWSMANAGE:256,RESOURCEMANAGE:512,FORUMMANAGE:1024,PROBLEMMANAGE:2048,CONTESTMANAGE:4096,SOLUTIONMANAGE:8192,SUPERADMINISTRATOR:1073741822};SDNUOJ.namespace("SDNUOJ.util.cookies");SDNUOJ.util.cookies=(function(){return{set:function(b,e,d,g,f){var c=b+"="+escape(e);if(d>0){var a=new Date();a.setTime(a.getTime()+d*1000);c+=";expires="+a.toGMTString()}if(g!=null){c+=";path="+g}if(f){c+=";secure"}document.cookie=c},get:function(d){var a=document.cookie.split("; ");for(var c=0;c<a.length;c++){var b=a[c].split("=");if(b[0]==d){return unescape(b[1])}}return""},remove:function(a){document.cookie=a+"=;expires="+(new Date(0)).toGMTString()}}})();SDNUOJ.namespace("SDNUOJ.util.storage");SDNUOJ.util.storage=(function(){var a=SDNUOJ.util.cookies;return{set:function(c,e,d){var b=new Date().getTime();if(window.sessionStorage){window.sessionStorage[c]=e;window.sessionStorage[c+"_timeset"]=b;window.sessionStorage[c+"_timeout"]=d}else{a.set(c,e,d,"/",true)}},get:function(c){var b=new Date().getTime();var e,d,g,f;if(window.sessionStorage){e=window.sessionStorage[c+"_timeset"];g=window.sessionStorage[c+"_timeout"];f=window.sessionStorage[c];if(e==null||g==null){f=null}if(f!=null&&e!=null&&g!=null){d=(b-e)/1000;if(d>g){f=null}}}else{f=a.get(c)}return(f!=""?f:null)},clear:function(){if(window.sessionStorage){window.sessionStorage.clear()}}}})();SDNUOJ.namespace("SDNUOJ.util.date");SDNUOJ.util.date=(function(){var a=new Array("日","一","二","三","四","五","六");var b=new Array("星期日","星期一","星期二","星期三","星期四","星期五","星期六");return{format:function(c,d){if(!c){return}if(!d){d="yyyy-MM-dd HH:mm:ss"}switch(typeof c){case"string":c=new Date(c.replace(/-/g,"/"));break;case"number":c=new Date(c);break}if(!c instanceof Date){return}var e={yyyy:c.getFullYear(),M:c.getMonth()+1,d:c.getDate(),H:c.getHours(),m:c.getMinutes(),s:c.getSeconds(),MM:(""+(c.getMonth()+101)).substr(1),dd:(""+(c.getDate()+100)).substr(1),HH:(""+(c.getHours()+100)).substr(1),mm:(""+(c.getMinutes()+100)).substr(1),ss:(""+(c.getSeconds()+100)).substr(1),ddd:a[c.getDay()],dddd:b[c.getDay()]};return d.replace(/(yyyy|MM?|d{1,4}|HH?|ss?|mm?)/g,function(){return e[arguments[0]]})}}})();SDNUOJ.namespace("SDNUOJ.util.form");SDNUOJ.util.form=(function(){function b(e){var d=e.find("input,textarea");for(var c=0;c<d.length;c++){var f=$(d[c]);if(f.is(":hidden")&&!f.is("textarea[data-editor='true']")){continue}if(f.attr("data-emptyinfo")&&f.val()==""){alert(f.attr("data-emptyinfo"));return false}if(f.attr("data-comparedto")&&f.attr("data-notequalinfo")&&f.val()!=$("#"+f.attr("data-comparedto")).val()){alert(f.attr("data-notequalinfo"));return false}if(f.attr("data-regex")&&f.attr("data-invalidinfo")&&!(new RegExp(f.attr("data-regex")).test(f.val()))){alert(f.attr("data-invalidinfo"));return false}}return true}function a(g,f){var d=f||window.event;var c=d.keyCode||d.which||d.charCode;if(d.ctrlKey&&c==13){g.parents("form").trigger("submit")}}return{verifyForm:b,setFormAutoVerify:function(){$("form[data-verify='true']").submit(function(c){return b($(this))})},quickSubmit:a,setTextboxQuickSubmit:function(){$("input[data-quicksubmit='true'],textarea[data-quicksubmit='true']").keydown(function(c){return a($(this),c)})}}})();SDNUOJ.namespace("SDNUOJ.util.dom");SDNUOJ.util.dom=(function(){return{getCheckboxValue:function(d){var a="";var c=0;for(var b=0;b<d.length;b++){if(d[b].checked){if(c>0){a+=","}a+=$(d[b]).val();c++}}return(c>0?a:null)},getRadioValue:function(b){for(var a=0;a<b.length;a++){if(b[a].checked){return $(b[a]).val()}}return null},getValue:function(a){var b=$("input[name='"+a+"'],select[name='"+a+"'],textarea[name='"+a+"']");if(b.length<=0){return null}if(b.is("input[type='checkbox']")){return this.getCheckboxValue(b)}else{if(b.is("input[type='radio']")){return this.getRadioValue(b)}else{return b.val()}}}}})();SDNUOJ.namespace("SDNUOJ.util.file");SDNUOJ.util.file=(function(){return{getFileExtension:function(a){return a.substring(a.lastIndexOf(".")).toLowerCase()}}})();SDNUOJ.namespace("SDNUOJ.util.list");SDNUOJ.util.list=(function(){function a(d){var c=$("input[name='"+d.attr("data-selectall-name")+"']");for(var b=0;b<c.length;b++){c[b].checked=d[0].checked}}return{selectAll:a,setCheckboxSelectAll:function(){$("input[data-selectall-name]").change(function(b){return a($(this))})}}})();SDNUOJ.namespace("SDNUOJ.util.loader");SDNUOJ.util.loader=(function(){return{load:function(a){var f=typeof a=="string"?[a]:a;for(var d=0;d<f.length;d++){var b=f[d];var g=b.split(".");var c=g[g.length-1].toLowerCase();var j=c=="css";var k=j?"link":"script";var e=j?' type="text/css" rel="stylesheet" ':' language="javascript" type="text/javascript" ';var h=(j?"href":"src")+'="'+b+'"';if($(k+"["+h+"]").length==0){document.write("<"+k+e+h+"></"+k+">")}}}}})();SDNUOJ.namespace("SDNUOJ.util.browser");SDNUOJ.util.browser=(function(){return{ltIE8:function(){var b=navigator.appName;var d=navigator.appVersion;var a=d.split(";");var c=(a&&a.length>1?a[1].replace(/[ ]/g,""):"");if(b=="Microsoft Internet Explorer"&&(c=="MSIE6.0"||c=="MSIE7.0")){return true}return false}}})();SDNUOJ.namespace("SDNUOJ.user");SDNUOJ.user=(function(){var m=SDNUOJ.util.cookies;var g=SDNUOJ.util.storage;var a="_oj_";var i=a+"bs";var e=a+"la";var j=a+"sl";var h=m.get(i);var d=(h!=""?h.split("|"):null);var l=(d!=null?d[0]:"");var f=(d!=null?d[1]:"");var b=(d!=null?d[2]:"");if(b==""){b="0"}var c=(function(){var n=false;if(l==""){m.remove(i)}else{n=true}if(!n){g.clear()}return n})();function k(n){return((f&n)==n)}return{getIsLogined:function(){return c},getCurrentUserName:function(){return l},getCurrentPermission:function(){return f},getUnreadMail:function(){return b},getLastLanguage:function(){var n=m.get(e);return(!n||n=="")?0:parseInt(n)},setLastLanguage:function(n){m.set(e,n,365*24*60*60,"/")},hasPermission:function(n){return k(n)},hasSourceViewPermission:function(){return k(SDNUOJ.PM.SOURCEVIEW)},hasAdministratorPermission:function(){return k(SDNUOJ.PM.ADMINISTRATOR)},hasContestManagePermission:function(){return k(SDNUOJ.PM.CONTESTMANAGE)},getSubmitList:function(n){var o=g.get(j);if(o!=null){n($.parseJSON(o));return}$.getJSON("/solution/submitlist").done(function(p){g.set(j,JSON.stringify(p),30);n(p)})}}})();
/*! http://mths.be/placeholder v2.0.8 by @mathias */
(function(i,k,f){var b=Object.prototype.toString.call(i.operamini)=="[object OperaMini]";var a="placeholder" in k.createElement("input")&&!b;var g="placeholder" in k.createElement("textarea")&&!b;var l=f.fn;var e=f.valHooks;var c=f.propHooks;var n;var m;if(a&&g){m=l.placeholder=function(){return this};m.input=m.textarea=true}else{m=l.placeholder=function(){var p=this;p.filter((a?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":d,"blur.placeholder":h}).data("placeholder-enabled",true).trigger("blur.placeholder");return p};m.input=a;m.textarea=g;n={get:function(q){var p=f(q);var r=p.data("placeholder-password");if(r){return r[0].value}return p.data("placeholder-enabled")&&p.hasClass("placeholder")?"":q.value},set:function(q,s){var p=f(q);var r=p.data("placeholder-password");if(r){return r[0].value=s}if(!p.data("placeholder-enabled")){return q.value=s}if(s==""){q.value=s;if(q!=o()){h.call(q)}}else{if(p.hasClass("placeholder")){d.call(q,true,s)||(q.value=s)}else{q.value=s}}return p}};if(!a){e.input=n;c.value=n}if(!g){e.textarea=n;c.value=n}f(function(){f(k).delegate("form","submit.placeholder",function(){var p=f(".placeholder",this).each(d);setTimeout(function(){p.each(h)},10)})});f(i).bind("beforeunload.placeholder",function(){f(".placeholder").each(function(){this.value=""})})}function j(q){var p={};var r=/^jQuery\d+$/;f.each(q.attributes,function(t,s){if(s.specified&&!r.test(s.name)){p[s.name]=s.value}});return p}function d(q,r){var p=this;var s=f(p);if(p.value==s.attr("placeholder")&&s.hasClass("placeholder")){if(s.data("placeholder-password")){s=s.hide().next().show().attr("id",s.removeAttr("id").data("placeholder-id"));if(q===true){return s[0].value=r}s.focus()}else{p.value="";s.removeClass("placeholder");p==o()&&p.select()}}}function h(){var t;var p=this;var s=f(p);var r=this.id;if(p.value==""){if(p.type=="password"){if(!s.data("placeholder-textinput")){try{t=s.clone().attr({type:"text"})}catch(q){t=f("<input>").attr(f.extend(j(this),{type:"text"}))}t.removeAttr("name").data({"placeholder-password":s,"placeholder-id":r}).bind("focus.placeholder",d);s.data({"placeholder-textinput":t,"placeholder-id":r}).before(t)}s=s.removeAttr("id").hide().prev().attr("id",r).show()}s.addClass("placeholder");s[0].value=s.attr("placeholder")}else{s.removeClass("placeholder")}}function o(){try{return k.activeElement}catch(p){}}}(this,document,jQuery));SDNUOJ.namespace("SDNUOJ.page.foreground");SDNUOJ.page.foreground=(function(){var f=SDNUOJ.user;function c(){var k=window.location.protocol+"//"+window.location.host;if(!window.location.host.indexOf(":")&&window.location.port!=80){k+=":"+window.location.port}if(k.charAt(k.length-1)!="/"){k+="/"}var j=window.location.href.replace(k,"");if(j.indexOf("?")>-1){j=j.substring(0,j.indexOf("?"))}return j}function b(){return $("#contest-submenus").length>0}function a(j){if("undefined"==typeof(j)){return}var k=j.init;if("undefined"==typeof(k)){return}k()}var g=c();if(!b()){$("#navbar > .navbar-nav li a[href$='"+g+"']").parent().addClass("active");$("#navbar > .navbar-nav > .dropdown > .dropdown-menu li a[href$='"+g+"']").parent().parent().parent().addClass("active")}if(f.getIsLogined()){var h=f.getCurrentUserName();var d=f.getUnreadMail();if(d>0){$("#btn-user").html(h+(d>0?'&nbsp;<span class="badge badge-danger">'+d+"</span>":"")).click(function(){self.location="/mail/box"});$("#user-mail").html("Mail Box"+(d>0?'&nbsp;<span class="badge badge-danger">'+d+"</span>":""))}else{$("#btn-user").click(function(){self.location="/user/info/"+h})}if(f.hasAdministratorPermission()){var i=$("<li>").append($("<a>").attr({href:"/admin",target:"_blank"}).html("Administration"));var e=$("<li>").addClass("divider");i.insertBefore($("#user-logout").parent());e.insertBefore($("#user-logout").parent())}}return{is:function(k){var j=$("#main-container").attr("data-type");return k==j},initPage:function(){var k=$("#main-container").attr("data-type");if(k==""){return}var j=k.split(".");var n=SDNUOJ.pages;for(var m=0;m<j.length;m++){var l=j[m];var n=n[l];a(n)}},getPagePath:c,getIsContestPage:b}})();SDNUOJ.namespace("SDNUOJ.page.highlight");SDNUOJ.page.highlight=(function(){var a=["text/x-csrc","text/x-c++src","text/x-java"];var b=new Array();function d(e){return a[e]}function c(h,f,j,g,i){if("undefined"==typeof(h)){return}if(!h){return}config={lineNumbers:true,styleActiveLine:!i,matchBrackets:!i,autofocus:!i&&!g,indentUnit:4,mode:d(j),extraKeys:{F11:function(k){k.setOption("fullScreen",!k.getOption("fullScreen"));if(k.getOption("fullScreen")){$("nav").hide()}else{$("nav").show()}},Esc:function(k){if(k.getOption("fullScreen")){k.setOption("fullScreen",false)}if(!k.getOption("fullScreen")){$("nav").show()}}}};if(g){config.viewportMargin=Infinity;config.readOnly=true;config.cursorBlinkRate=-1}var e=h.fromTextArea(f[0],config);b.push(e)}return{addHighlightor:c,setAllHighlightEditors:function(){if($("textarea[data-codeeditor='true']").length>0){var f=SDNUOJ.user;var e=f.getLastLanguage();$("textarea[data-codeeditor='true']").each(function(){var g=$(this);c(CodeMirror,g,e,false,false)})}},setAllHighlightViewers:function(){if($("textarea[data-codeview='true']").length>0){$("textarea[data-codeview='true']").each(function(){var f=$(this);var e=f.attr("data-language");var g=f.attr("data-simpleview")=="true";c(CodeMirror,f,e,true,g)})}},getAll:function(){return b},clearAllText:function(){for(var e=0;e<b.length;e++){b[e].setValue("")}},setAllLanguage:function(f){for(var e=0;e<b.length;e++){b[e].setOption("mode",d(f))}}}})();SDNUOJ.namespace("SDNUOJ.page.tree");SDNUOJ.page.tree=(function(){function a(b){if(b.hasClass("tree-item-expand")){b.removeClass("tree-item-expand");b.addClass("tree-item-collapse");$("#"+b.attr("data-collapse-target")).show()}else{if(b.hasClass("tree-item-collapse")){b.removeClass("tree-item-collapse");b.addClass("tree-item-expand");$("#"+b.attr("data-collapse-target")).hide()}}}return{collapseList:a,setImageCollapse:function(){$("a[data-collapse='true']").attr("href","javascript:void(0);").click(function(b){return a($(this))})}}})();SDNUOJ.namespace("SDNUOJ.page.foreground.contest");SDNUOJ.page.foreground.contest=(function(){var a=SDNUOJ.user;return{initPage:function(){if($("#contest-submenus").length>0){if(a.hasContestManagePermission()){var d=$("#contest-submenus").attr("data-contestid");var b=$("<li>").append($("<a>").attr("href","/contest/"+d+"/overall/statistics").html("Statistics"));$("#contest-submenus").append(b)}var c=SDNUOJ.page.foreground.getPagePath();$("#contest-submenus li a[href$='"+c+"']").parent().addClass("active")}}}})();SDNUOJ.namespace("SDNUOJ.pages.contest.index");SDNUOJ.pages.contest.index=(function(){function a(){var b=new Date(new Date().getTime()+TIME_DIFF);$("#server-time").html(SDNUOJ.util.date.format(b,"yyyy-MM-dd HH:mm:ss"));setTimeout("SDNUOJ.pages.contest.index.serverClockTick()",1000)}return{init:function(){if($("#server-time").length>0){a()}},serverClockTick:a}})();SDNUOJ.namespace("SDNUOJ.pages.contest.statistics");SDNUOJ.pages.contest.statistics=(function(){function a(){var s=$("#table-contest-statistics")[0];var o=$("#contest-submenus").attr("data-contestid");var b=0;var f=b+1;var m=(s.rows[f].textContent?s.rows[f].textContent:s.rows[f].innerText);if(s.rows.length<=2&&m.indexOf("No")>-1){return}var q=s.insertRow(s.rows.length);var d=q.insertCell(0);d.style.textAlign="center";d.innerHTML='<strong><a href="/contest/'+o+'/status/list">Total</a></strong>';for(var h=1;h<s.rows[f].cells.length;h++){var e=q.insertCell(h);var l=0;e.align="center";for(var g=f;g<s.rows.length-1;g++){var r=s.rows[g].cells[h];var k=(r.textContent?r.textContent:r.innerText);l+=parseInt(k)}var p=s.rows[b].cells[h];var c=s.rows[f].cells[h];var n=$(c).find("span").attr("class");e.innerHTML='<a href="/contest/'+o+"/status/list"+(p.id!=""?"?"+p.id:"")+'"><span'+(n!=null?' class="'+n+'"':"")+">"+l+"</span></a>";e.style.textAlign="center"}}return{init:function(){if($("#table-contest-statistics").length>0){a()}}}})();SDNUOJ.namespace("SDNUOJ.pages.problems");SDNUOJ.pages.problems=(function(){var a=SDNUOJ.user;function b(d,c){var e=$("#S"+d);if(e.length>0){e.addClass(c==2?"problem-ac":(c==1?"problem-wa":"problem-normal"));e.html(c==2?"Y":(c==1?"N":""))}}return{init:function(){if(a.getIsLogined()&&$("#SOpen").length>0){a.getSubmitList(function(f){var c=f.solved;var d=f.unsolved;if(d){for(var e=0;e<d.length;e++){b(d[e],1)}}if(c){for(var e=0;e<c.length;e++){b(c[e],2)}}})}}}})();SDNUOJ.namespace("SDNUOJ.pages.recent");SDNUOJ.pages.recent=(function(){return{init:function(){if($("#table-recent").length>0){$.getJSON("/contests/recentinfo").done(function(f){$("#tr-recent-info").remove();for(var c=f.length-1;c>=0;c--){if(f[c].access==""){f[c].access="Public"}var h=$("<td>").addClass("text-center").html(c+1000);var b=$("<td>").html('<a href="'+f[c].link+'" target="_blank">'+f[c].name+"</a>");var g=$("<td>").addClass("text-center").html(f[c].start_time);var e=$("<td>").addClass("text-center").html('<span class="label contest_'+f[c].access+'">'+f[c].access+"</span>");var d=$("<td>").addClass("text-center").html(f[c].oj);var a=$("<tr>").append(h).append(b).append(g).append(e).append(d);$("#table-recent").append(a)}}).fail(function(){$("td-recent-info").html("No such contest")})}}}})();SDNUOJ.namespace("SDNUOJ.pages.status");SDNUOJ.pages.status=(function(){var a=SDNUOJ.user;return{init:function(){if(a.getIsLogined()){function b(c,d,f,e){if(a.hasSourceViewPermission()||a.getCurrentUserName()==d){return'<a href="/solution/view/'+c+'">'+f+"</a>"}else{return f}}$(".status-language").each(function(c,f){var g=$(this).attr("id");if(g.indexOf("lang_default_")==0){var d=g.split("_");$(this).html(b(d[2],d[3],$(this).html(),false));$(this).attr("id","lang_"+c)}else{if(g.indexOf("lang_contest_")==0){var d=g.split("_");$(this).html(b(d[2],d[3],$(this).html(),true));$(this).attr("id","lang_"+c)}}})}}}})();SDNUOJ.pages.problemstatistic=(function(){return{init:function(){SDNUOJ.pages.status.init();function a(){if(totalCount<1){return true}for(var b=0;b<statisticData.length;b++){if(statisticData[b].data>0){return false}}return true}if(!a()){$.getScript("/static/js/foundation/jquery.flot-0.8.3.min.js",function(){$.getScript("/static/js/foundation/jquery.flot.pie-0.8.3.min.js",function(){$.plot("#statistic-chart",statisticData,{series:{pie:{innerRadius:0.6,show:true,label:{show:false}}},legend:{show:false},grid:{hoverable:true}});$('<span id="statistic-chart-tipcontainer"></span>').addClass("pieLabel").addClass("statistic-chart-tipcontainer").appendTo($("#statistic-chart"));$("#statistic-chart").bind("plothover",function(d,h,c){if(c){var b=(totalCount>0?c.datapoint[1][0][1]/totalCount*100:0);var e=$("<div></div>").addClass("statistic-chart-tip").css("background-color",c.series.color).html(c.series.label+"<br/>"+b.toFixed(2)+"%");var g=100-24-5;var f=125-(b>=100?28:b>=10?25:22)-6;$("#statistic-chart-tipcontainer").css({position:"absolute",top:g*$("#statistic-chart").height()/200,left:f*$("#statistic-chart").width()/250}).empty().append(e).fadeIn(200)}else{$("#statistic-chart-tipcontainer").hide().empty()}})})})}else{$("#statistic-chart").hide()}}}})();SDNUOJ.namespace("SDNUOJ.pages.userinfo");SDNUOJ.pages.userinfo=(function(){var a=SDNUOJ.user;return{init:function(){if(a.getIsLogined()){var c=a.getCurrentUserName().toLowerCase();var b=$("#downloadcode_"+c);if(b.length>0){b.html('(<a href="/solution/sourcecodes">Download</a>)')}}}}})();SDNUOJ.namespace("SDNUOJ.pages.mailbox");SDNUOJ.pages.mailbox=(function(){var a=SDNUOJ.user;return{init:function(){$("#form-mailbox-delete").submit(function(b){if($(this).serialize().indexOf("mailid")<0){alert("Please select at least one mail!");return false}if(!window.confirm("Are you sure you want to delete selected mail(s)?")){return false}return true});$("button[data-loading-text]").click(function(b){$(this).button("loading")})}}})();SDNUOJ.namespace("SDNUOJ.pages.mail");SDNUOJ.pages.mail=(function(){var a=SDNUOJ.user;return{init:function(){$("#form-mail-delete").submit(function(b){if(!window.confirm("Are you sure you want to delete this mail?")){return false}return true});$("button[data-loading-text]").click(function(b){$(this).button("loading")})}}})();SDNUOJ.namespace("SDNUOJ.pages.submitcode");SDNUOJ.pages.submitcode=(function(){var b=SDNUOJ.user;var a=SDNUOJ.page.highlight;return{init:function(){var c=b.getLastLanguage();var f=false;var d=$("#lang").children("option");for(var e=0;e<d.length;e++){if(d[e].value==c){f=true;break}}if(f){$("#lang").val(c)}$("#lang").change(function(){var g=$("#lang").val();b.setLastLanguage(g);a.setAllLanguage(g)});$("button[type='reset']").click(function(){a.clearAllText("")})}}})();(function(){if(SDNUOJ.util.browser.ltIE8()){$("#browser-warning").show()}$("[placeholder]").placeholder();$(".img-checkcode").trigger("click");SDNUOJ.util.form.setFormAutoVerify();SDNUOJ.util.form.setTextboxQuickSubmit();SDNUOJ.util.list.setCheckboxSelectAll();SDNUOJ.page.highlight.setAllHighlightEditors();SDNUOJ.page.highlight.setAllHighlightViewers();SDNUOJ.page.tree.setImageCollapse();SDNUOJ.page.foreground.initPage();SDNUOJ.page.foreground.contest.initPage()})();var _hmt=_hmt||[];(function(){var c=$("#main-container").attr("data-tjid");if(c!=""){var b=document.createElement("script");b.src="//hm.baidu.com/hm.js?"+c;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(b,a)}})();